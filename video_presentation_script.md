# Oracle APEX Component Modifier — Сценарій відео-презентації

## Вступ

Уявіть: ви — розробник Oracle APEX. Вам потрібно змінити сторінку в додатку — додати нове поле, змінити регіон, підключити нову LOV-довідку. Зазвичай це означає відкрити APEX App Builder, клікати по десятках діалогових вікон, перемикатися між вкладками, вручну створювати таблиці та пакети в базі даних, а потім повертатися назад в APEX. Якщо змін багато — це годи|ни рутинної роботи. А якщо таких додатків кілька, з різними середовищами — DEV, STG, PRD — масштаб проблеми зростає ще більше.

А тепер уявіть інший сценарій. Ви відкриваєте термінал і пишете одну команду природною мовою: «Додай на сторінку 10 поле P10_STATUS типу select list на основі LOV STATUS_LOV і створи таблицю APP_STATUS, якщо її ще не існує». І все — система сама експортує потрібний компонент, внесе зміни в базу даних, модифікує файли APEX-компонента, імпортує все назад і перевірить результат. Без жодного кліку в браузері. Саме це робить Oracle APEX Component Modifier.

## Що це таке

Oracle APEX Component Modifier — це навичка (Skill) для Claude Code, офіційного CLI-інструменту від Anthropic. Ця навичка реалізує повний цикл модифікації APEX-компонентів програмним шляхом. Вона поєднує потужність штучного інтелекту Claude з Oracle SQLcl через відкритий протокол MCP — Model Context Protocol.

По суті, це міст між природною мовою розробника та внутрішніми механізмами Oracle APEX. Ви описуєте, що хочете змінити, а система перетворює ваш запит на конкретні технічні дії: SQL-скрипти, патчі до експортованих файлів APEX та команди імпорту.

## Технологічний стек

Рішення побудоване на трьох ключових технологіях.

Перша — Claude Code. Це CLI-інструмент від Anthropic, який дозволяє інтегрувати модель Claude безпосередньо у ваш робочий процес розробки. Claude Code підтримує навички — Skills — які зберігаються у директорії проєкту і автоматично підхоплюються при запуску. Навичка може мати доступ до файлової системи, інструментів пошуку, редагування та зовнішніх серверів через MCP.

Друга технологія — MCP, Model Context Protocol. Це відкритий протокол, який дозволяє AI-моделям безпечно взаємодіяти з зовнішніми інструментами та сервісами. У нашому випадку MCP-сервером виступає Oracle SQLcl — офіційний командний інструмент Oracle для роботи з базами даних.

Третя — Oracle SQLcl версії 25.2 і вище. Починаючи з цієї версії, SQLcl має вбудований режим MCP-сервера. Запускається простою командою: sql мінус mcp. Через цей сервер Claude може виконувати SQL-запити, PL/SQL-блоки, команди apex export, apex list та інші операції — все програмно, без ручного втручання.

## Як працює робочий процес

Робочий процес складається з семи послідовних кроків. Розглянемо кожен.

Крок перший — експорт. Система підключається до бази даних через збережене з'єднання SQLcl і виконує команду apex export з параметром split. Експортується тільки потрібний компонент — наприклад, одна конкретна сторінка. Це мінімізує обсяг файлів і ризик зачепити щось зайве. Результат — набір SQL-файлів, які описують структуру APEX-компонента в текстовому форматі.

Крок другий — аналіз документації. Навичка містить локальну копію документації по внутрішніх пакетах APEX: wwv_flow_imp, wwv_flow_imp_page, wwv_flow_imp_shared. Ці документи описують, як APEX зберігає компоненти у файлах експорту — яка структура викликів, як працює система ідентифікаторів, які параметри приймають процедури створення регіонів, елементів, кнопок, динамічних дій. Claude читає цю документацію перед кожною модифікацією, щоб діяти за правилами, а не навмання.

Крок третій — планування змін. Claude аналізує запит користувача і розділяє його на дві частини: зміни в базі даних (DDL, DML, PL/SQL) та зміни в APEX-компоненті (нові елементи, регіони, процеси). План документується за спеціальним шаблоном: що саме змінюється, в якому порядку, які нові ідентифікатори потрібні, які є ризики.

Крок четвертий — зміни в базі даних. Якщо потрібно створити нову таблицю, змінити пакет або додати подання — Claude генерує ідемпотентні SQL-скрипти і виконує їх через SQLcl MCP. Ідемпотентність означає, що скрипт можна запустити повторно без помилок — він перевіряє наявність об'єкта перед створенням.

Крок п'ятий — патчинг файлів експорту. Це серцевина всього процесу. Claude вносить точкові зміни в експортовані SQL-файли, дотримуючись суворих правил: мінімальність змін, використання стабільних якорів — ідентифікаторів та імен замість номерів рядків, збереження структури файлу, коректне керування ідентифікаторами компонентів. Для нових компонентів — вставляється новий блок виклику create. Для змін існуючих — модифікуються конкретні параметри.

Крок шостий — імпорт. Модифіковані файли імпортуються назад в APEX через SQLcl MCP. Система запускає install_component.sql або install.sql в залежності від типу експорту. Лог імпорту аналізується на помилки та попередження.

Крок сьомий — верифікація. Для підтвердження коректності Claude може повторно експортувати компонент і порівняти результат з очікуваним. Користувач отримує зведення: які зміни внесено в базу, які — в APEX, diff модифікованих файлів та статус імпорту.

## Документація та безпека

Окремо варто відзначити підхід до документації та безпеки.

Навичка містить шість документів по внутрішніх пакетах APEX — це понад сотня процедур і функцій з детальними описами параметрів. Є окремий файл з усіма допустимими значеннями перерахувань — типи регіонів, типи елементів, типи процесів. Є інструкції з патчингу — чотири основні стратегії редагування з таблицею типових помилок та їх уникнення. Є шаблон плану змін і контрольний список валідації з перевірками цілісності файлу, консистентності ідентифікаторів, форматування рядків та функціональної коректності.

Щодо безпеки: SQLcl MCP підтримує рівні обмежень від 1 до 4. Рівень 4 — найбільш обмежувальний, встановлений за замовчуванням. Для повноцінної роботи навички використовується рівень 1, але він може бути налаштований відповідно до вимог організації. Усі сесії MCP позначаються у V$SESSION бази даних, а дії логуються в таблицю DBTOOLS$MCP_LOG. Oracle рекомендує не використовувати MCP з продуктивними базами даних без належного контролю.

## Приклади використання

Ось кілька прикладів команд:

Перший: «Додай на сторінку 10 елемент P10_STATUS типу select list на основі LOV STATUS_LOV і створи таблицю APP_STATUS, якщо її не існує». Це запускає повний цикл — від створення таблиці в базі до появи нового поля на сторінці APEX.

Другий: «Перейменуй стовпець відображення в LOV з ідентифікатором 23618973754424510000 і оновив залежні елементи на сторінці 3». Навичка знаходить LOV, змінює його, потім знаходить всі елементи, які на нього посилаються, і оновлює їх теж.

Третій приклад — просто аналіз: «Опиши сторінку 1». Claude експортує сторінку і надає детальний звіт про її структуру — регіони, елементи, процеси, динамічні дії.

## Переваги підходу

Які переваги дає цей підхід?

По-перше, швидкість. Замість десятків хвилин ручної роботи в браузері — одна команда в терміналі.

По-друге, відтворюваність. Кожна зміна документується і може бути відтворена на іншому середовищі. Файли експорту можна зберегти в Git, зробити код-рев'ю, відкотити при потребі.

По-третє, консистентність. AI дотримується задокументованих правил і перевіряє свою роботу за контрольним списком. Людина може забути перевірити ідентифікатори або пропустити залежність — система ні.

По-четверте, масштабованість. Той самий підхід працює для простих змін — додати одне поле — і для складних — перебудувати цілу сторінку з новими регіонами, елементами та логікою.

## Необхідні умови

Для роботи потрібно: Claude Code CLI від Anthropic, Oracle SQLcl версії 25.2 або новіше, Java 17 або 21, та збережене підключення до бази даних Oracle з APEX. Налаштування зводиться до клонування репозиторію, створення збереженого з'єднання SQLcl та вказання шляху до SQLcl у конфігураційному файлі .mcp.json.

## Підсумок

Oracle APEX Component Modifier — це практичний інструмент, який переносить роботу з APEX-компонентами з графічного інтерфейсу в командний рядок і дозволяє автоматизувати її за допомогою AI. Він побудований на відкритих стандартах — MCP для інтеграції, SQLcl для взаємодії з Oracle, Claude Code Skills для організації робочого процесу.

Це не заміна APEX App Builder — це доповнення для сценаріїв, де програмна модифікація ефективніша за ручну: масові зміни, міграції між середовищами, стандартизація компонентів, автоматизація типових операцій.

Код проєкту відкритий і доступний на GitHub. Спробуйте — і побачите, як один рядок у терміналі може замінити десятки кліків у браузері.
